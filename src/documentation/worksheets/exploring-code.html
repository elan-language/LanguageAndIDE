<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-GB">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<link href="../../../out/website/styles/colourScheme.css" rel="stylesheet" />
<link href="../../../out/website/styles/elanStyle.css" rel="stylesheet" />
<link href="../../../out/website/styles/documentation.css" rel="stylesheet" />
<link href="../../../out/website/styles/worksheet.css" rel="stylesheet" />
<title>Worksheet</title>
</head>
<body>
<div id="worksheet">
<div class="docTitle">Exploring and editing code</div>

<button id="auto-save">Auto-save to file</button><span> to continue. (After that any entries made into the worksheet will be automatically saved, and you can re-load the partially-completed worksheet in future - at which point you will be asked to auto-save it again).</span>

<div class="step" id="step0">
  <label for="username">Enter your name: </label>
  <input type="text" id="username" />
  <h3>Preliminaries</h3>
  <ul>
    <li>Set the browser to Full Screen view, to give this worksheet, and your code, as much space as possible.</li>
 </ul>
  <label class="done" for="done0">Preliminaries completed</label>
  <input type="checkbox" class="step-complete" id="done0" />
</div>

<div class="step" id="step1">
    <h3>1. Loading and running a program</h3>

<ul>
    <li>From the <b>Demo</b> menu (top-left of screen) select <b>Bubbles</b></li> to load an Elan code file into the editor.
    <li>Run the program by pressing the <b>Run</b> button (the white triangle at the top of the screen) and briefly observe its dynamic
        output on the <b>Display</b>. Notice that the 'status' panel (top right of the window) shows
        the program is currently <b>running</b>. Notice also that the code editor window now has a pale tint over it, indicating that
        it does not have focus.
    </li>
    <li>Some programs will stop automatically at a certain point, this one doesn't. 
        Stop the program now by pressing the <b>Stop</b> button (white square).</li>
    <li>Click anywhere within the code editor pane to give it the focus (white background).
        (Or you can navigate to it by pressing <b>Tab</b> repeatedly, until the code editor's background turns white). 
    <i>Remember that if the code editor has a tinted background it doesn't have focus and won't respond to
    your inputs.</i> 
    </li>
    <li>Before we move on to explore the code, if your mouse has a scroll-wheel then - with the focus on the
        code editor - hold down the <b>Ctrl</b> key and scroll the mouse wheel, both ways. What is the effect?
        <textarea id="input1">
    </li>
</ul>

<label class="done" for="done1">Step completed</label>
<input type="checkbox" class="step-complete" id="done1"/>
</div>

<div class="step" id="step2">
    <h3>2. Reading code</h3>
    <ul>
        <li>The code is made up of instructions</li>
        <li>Each instruction is numbered on the right hand side. These 'instruction' numbers are not part of the code itself -
            they play no part in what the code <i>does</i> - the editor adds the numbers to the code to make it easy for
            us to draw attention to a specific instruction.</li>
        <li>An instruction always starts with a 'keyword' which is coloured like <el-kw>this</el-kw> and is always lower-case. 
             Within <i>some</i> instructions you will see some additional keywords. 
             However, it is the <i>initial</i> keyword that defines the nature of the instruction.
             Thus we might refer to a `<el-kw>call</el-kw> instruction' or a 
        <el-kw>let</el-kw> instruction, or simply as 'a <el-kw>call</el-kw>' or 'a <el-kw>let</el-kw>'.</li>  
        <li>Find at least five different keywords that define instructions within this program - not including <el-kw>end</el-kw>
        (we'll explain that one shortly) - and enter them here:
        <textarea id="input2"> </li>         
        <li>A line that begins with a <el-comment>#</el-comment> ('hash symbol') and is coloured <el-comment>like this</el-comment> is
        called  a 'comment'. A comment is <i>not</i> an instruction - hence it does not have an instruction number - and plays no part in what the code <i>does</i>.
        Comments can provide additional information <i>about the code</i> for the human reader's benefit.
        At the top of file you will see comment that tells you which version of Elan you are using. 
        This version comment is always present at the top of an Elan code file - it cannot be edited, deleted, or moved.</li>
    </ul>
    <label class="done" for="done2">Step completed</label>
    <input type="checkbox" class="step-complete" id="done2"/>
</div>

<div class="step" id="step3">
    <h3>3. Selecting instructions</h3>
    <ul>
        <li>In order to edit, move, or delete, an instruction (we'll do all three of those, shortly)
            you first need to 'select' (highlight) it. There are several different ways to do this.</li>
        <li>Locate instruction number <el-fr>10</el-fr> on the right-hand side and click <i>on the number</i>. 
            This will <span style="background-color: var(--selection);">highlight</span>
            the whole of that instruction - including the instruction number. </li>
        <li>Now select instruction number 2, but this time, instead of clicking on the number, click
            on the initial keyword in that instruction (<el-kw>let</el-kw>).</li>
        <li>Press the cursor-down key (<b>&#x2193;</b>) which will select the next instruction.</li>
        <li>Notice that this instruction spans several lines on the screen - from <el-kw>for</el-kw>
        to the <el-kw>end for</el-kw>. This is known as a 'compound' instruction - it contains several
        other instructions - all of which are indented by two characters - just to make the structure
        clearer. All compound instructions start with a keyword and end with <el-kw>end</el-kw> followed
        by that initial keyword - which is why a line beginning <el-kw>end</el-kw> is <i>not</i> an
        instruction in its own right. Compound instructions can even contain other compound instructions which
        is sometimes called 'nesting'. How many different compound instructions can you identify in this
        code - enter only the initial keyword of each different kind: <textarea id="input3a"></li>
        <li>Press cursor-right to navigate <i>into</i> the <el-kw>for</el-kw>
        instruction, and then use the up/down keys. Also try the <b>Home</b> and <b>End</b> keys if your keyboard
        has them. Either way, how far can you move the highlight up and down
        from here <textarea id="input3b"></li>
        <li>Now press cursor left to go back <i>out</i>to the enclosing compound instruction, and then try 
            cursor up/down, <b>Home</b> and <b>End</b>. What you will discover is that up/own, <b>Home</b> and <b>End</b>
            apply to instructions within the same indentation level, and that you need to use left/right to
            change levels.</li> 
        </li>You can scroll to the bottom of the code using the scroll bar on the right of the editor, or the scroll-wheel if your
            mouse has one. Holding down the <b>Ctrl</b> button while using the scroll wheel will change the magnification of the text.</li>
    </ul>
    <label class="done" for="done3">Step completed</label>
    <input type="checkbox" class="step-complete" id="done3"/>
</div>

<div class="step" id="step4">
    <h3>4. Deleting or moving instructions</h3>
    <ul>
        <li>Select instruction number 10. Then delete the instruction by pressing <b>Ctrl-Delete</b> 
            (or <b>Ctrl-d</b> if your keyboard doesn't have a Delete key).
        The requirement for <b>Ctrl</b> is to reduce the risk of accidental deletion. Notice that all the instructions following
        the one deleted have been renumbered.</li>
        <li><i>In this case</i>, despite the deleted instruction, the program will still run. Run it and
        briefly describe the difference it has made to the behaviour of the program: <textarea id="input4"></li>
        <li>Restore the deleted instruction by pressing <b>Ctrl-z</b> (alternatively, you may  use the <b>Undo</b> button.</li>
        <li>Select the restored instruction number 10 again, and then press <b>Ctrl-&#x2193;</b>. Describe what this
            has done: <textarea id="input4a"></li>
        <li>What happens if you press <b>Ctrl-&#x2193;</b> <i>again</i>? <textarea id="input4b"></li>
        <li>Restore the original code, either by applying the opposite action (<b>Ctrl-&#x21931;</b>), or you may again just undo the action.</li>
    </ul>
    <label class="done" for="done4">Step completed</label>
    <input type="checkbox" class="step-complete" id="done4"/>
</div>

<div class="step" id="step5">
    <h3>5. Editing instructions</h3>
    <p>So far the changes we have made involved moving or deleting <i>whole</i> instruction.
        When you start to write programs from scratch (in the next worksheet) you will find that
        you will need this ability. However, more commonly you will need to edit code <i>within</i>
        an instruction, so we'll do that now.</p>
    <ul>
        <li>In this program, each bubble is updated - in position and size - multiple times per second, 
            but as you can read from the comment between instructions 10 and 11 - with each update
            there is a 5% chance of it bursting, which will reduce its <el-id>radius</el-id> to 0 (instruction 11), and its
            position back to the bottom of the screen (instruction 12). 
            What would happen if we reduce that probability of bursting?
        </li>
        <li>The 5% chance is represented by the value <el-lit>0.05</el-lit> (a 5% chance) in instruction 11.
            There are two ways to get the focus onto this value: either click directly on that value, or
            select instruction 11, and then press <b>Tab</b>. Either way, you will end up with
            <i>part</i> of the instruction being highlighted:<el-code><el-field id="expr31" class="selected focused ok" tabindex="0"><el-txt><input spellcheck="false" data-cursorstart="15" data-cursorend="15" size="14" style="width: 15ch" value="random() &lt; 0.05"></el-txt><el-place><i>condition</i></el-place><el-compl></el-compl><el-msg></el-msg><el-help title="Click to open Help for this field"><a href="documentation/LangRef.html#ExpressionField" target="doc-iframe">?</a></el-help></el-field></el-code>
        </li>
        <li>The highlighted area is a 'field'. Fields are the <i>editable</i> parts of an instruction. 
        Most instructions define one, two, or three fields (<el-kw>main</el-kw> is an exception, having no fields).
        The rest of the instruction is made up largely of keywords and, less-commonly, punctuation symbol, which, 
        deliberately cannot be edited because they define the essential nature of the instruction - they can
        only be removed by deleting the whole instruction as you have previously done. In most programming
        languages you can edit every character in the code, but this very commonly leads to confusing errors.</li>
        <li>Press <b>Backspace</b> <i>once</i> to delete the 5, and then type 1 and <b>Enter</b>. The field
        returns to its unselected form, and - because this was the <i>last</i> field (in this case the only field)
        for the instruction, the focus has now moved on to the next instruction or comment. Run the program
        again and briefly describe what difference you notice. <textarea id="input5a"></li>
        <li>Select that same field again, and this time delete the whole value <el-lit>0.05</el-lit>.
        Now the field's background colour will have changed, and also the 'Parse' status in the 'status panel'
        (top-right corner of the screen) will have changed - both indicating that a field
        are incomplete. Try typing in <i>just</i> <el-lit>.01</el-lit>. The field background - and the parse status -
        go red, and indicate that this is an invalid entry (fractional numbers must begin with a digit, not a decimal point).
        So correct the entry to <el-lit>0.05</el-lit> - you can use the cursor keys to move the cursor, you don't have
        to delete all the characters. A good rule of thumb (not 100% correct, but usually) is that if you are 
        typing code into a field, and it goes red, use the backspace to remove characters until it turns green or
        amber and try to work out why the one character that made it go red was wrong. Identifying the cause
        of an error takes time to learn, but at least with this editor you do get the warning or error message
        as soon as you type one wrong character.</li>
    <li>To test this skill, select instruction number 15 and press Tab to select the first field which specifies
        the <el-method>pause</el-method> and then again to select the second field, which holds the value <el-lit>50</el-lit>.
        Edit this value to <el-lit>250</el-lit> and run the program to test that it is much slower. Leave the change
        in place as that will help us in our next step.</li>
    <li>From the field, press <b>Tab</b> multiple happens. Briefly describe what happens: <textarea id="input5b">.</li>
</ul>
<label class="done" for="done5">Step completed</label>
<input type="checkbox" class="step-complete" id="done5"/>
</div>

<div class="step" id="step6">
<h3>6. Inserting new instructions</h3>
<p>We are now going to insert a new instruction to make an audible ping when a bubble bursts.</p>
<ul>
    <li>Get the focus back onto the the whole of instruction number 15 (blue background) - not on any of its fields.
        Then hit <b>Enter</b>. This will insert a 'new code selector' to be entered <i>below</i> the current instruction
        and the focus will have moved there. The selector shows the initial keyword for <i>each</i> kind of instruction
        that may legitimately be inserted <i>at this location</i>. You select the instruction by starting to type it -
        in <i>most</i> cases just the first letter is needed; in a few cases more characters are needed to 
        distinguish between instructions that start the same.</li>
    <li>Type <b>c</b> to insert a <el-kw>call</el-kw> instruction. You will see that the <i>fixed</i> code
    has been added, and the focus shifted to the first field, and there is already a pop-up menu of options.
    What we want is the procedure named <el-method>tone</el-method>, but as that would be a long way down
    the list, just type a <b>t</b> and now you will see <el-method>tone</el-method> in the list of matching options
    - at the top, in this case. Cursor-down to select <el-method>tone</el-method> and press <b>Enter</b>
    to insert it in the field. You should
        always use the pop-up options <i>where you can</i> not only because it saves typing, but because
        it reduces errors.</li>
    <li>Press <b>Enter</b> again to shift focus to the second field - between the brackets, which
        will change to indicate what is expected - in this case, three values representing:
        <ul>
            <li>The duration of the tone, in milliseconds.</li>
            <li>The frequency of the tone, in Hz.</li>
            <li>The volumne of the tone</li>
        </ul>
        separated by commas. Type this:  <el-code>10, 512, 0.1</el-code> and hit <b>Enter</b>.
        Assuming you haven't made an error in the typing, the status panel (after a second or two)
        should show that all is good. So run the program.</li>
    <li>If you don't hear <i>anything</i>, check the sound settings on your computer. And, if you
        are working in a classroom, <i>please turn the volume as low as possible while still audible.
            Once you can hear something, describe what you hear: <textarea id="input6a">.</li>
    <li>We got a result - the very short duration means that it sounds more like a 'click' but 
        that's OK. But the clicks shouldn't be regular - they should be <i>irregular</i>, occurring
        whenever a bubble bursts. We've put the instruction in the wrong place! It needs to be
        just under instruction number 11, which simulates the burst. However, we can't just move
        the instruction upwards as we did before, because it needs to go to inside
        another compound instruction. We could delete it and create the instruction again where
        it should have been but that is a bit annoying. So instead we will cut and paste it.</li>
     <li>With the whole new instruction (currently  number 16) selected, press <b>Ctrl-x</b> to
    cut it - into the (hidden) clipboard. Now select instruction number 11 and hit <b> to
        create a new code selector underneath it. <i>You can only ever paste instructions
        onto a new code selector</i>. Then press <b>Ctrl-v</b> to paste. Assuming that the
        instruction(s) you are trying paste are valid for the target location (as in this case)
        the cut code will reappear - and instructions renumbered accordingly.</li>
    <li>Run the program and hopefully the clicks will now be irregular. If it is not clear
        that they <i>do</i> correspond with burst bubbles, slow down the program execution
        again by increasing the length of the pause in the (now) instruction number 16.
    </li>
    <li>Lastly you may notice that underneath instruction 16 you have been left with another
        selector for new code (it just shows as <el-code>new code</el-code> when it does not have focus).
        When entering or editing a longer program it is not uncommon to have several of these 
        surplus-to-requirements. They can selected and deleted individually, but the the <b>Trim</b>
        button above the editor will remove them all. (Any that it leaves indicate places where
        further instructions are <i>expected</i> - because the code would make no sense without them).
    </li>
</ul>
<label class="done" for="done5">Step completed</label>
<input type="checkbox" class="step-complete" id="done5"/>
</div>

<div class="step" id="step6">

    <p>Congratulations! You have finished the worksheet, and you now know enough about navigating and editing
    code to start writing your first program - with the help of another Worksheet. Meantime,
    click <b>Help > Home > IDE Reference > Code editor</b> - for a handy summary of all the above
    operations, and a few more that you can also try out here.</p>

    <p>You might also have noticed that whenever you are selected on an instruction, or on a field, 
        or if any warning/error message is displayed within the code, there is an underlined question-mark
        close by. Clicking on this question mark will open the <b>Help</b> tab, showing the most relevant
        content within the documentation.</p>

    <div class="license">
        <img decoding="async" loading="lazy" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-nd.png" width="118" height="41">
        This worksheet is copyright &copy; Richard Pawson 2025, and protected by the Creative Commons license:
            <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"> Attribution-NonCommercial-NoDerivatives 4.0 International</a>.
          If you copy and <i>modify</i> this worksheet you may not distribute your modified version (outside your own teaching institution) without the author's permission.
          Please <a href="mailto:rpawson@nakedobjects.org" target="_blank">email the author</a> to report errors or suggest improvements.
      </div>
    </div>
  

    <div hidden="" id="hash"></div>
    <div hidden="" id="changes"></div>
</div>
    <script src="../../../out/website/worksheet-scripts.js"></script>
</body>
</html>
