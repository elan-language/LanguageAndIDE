<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-GB">

  <head>
      <meta http-equiv="Cache-Control" content="no-store" />
      <link href="https://elan-language.github.io/LanguageAndIDE/styles/colourScheme.css" rel="stylesheet" />
      <link href="https://elan-language.github.io/LanguageAndIDE/styles/elanStyle.css" rel="stylesheet" />
      <link href="https://elan-language.github.io/LanguageAndIDE/styles/documentation.css" rel="stylesheet" />
      <link href="https://elan-language.github.io/LanguageAndIDE/styles/worksheet.css" rel="stylesheet" />
      <title>Blackjack 1</title>
  </head>

  <body>
    <div id="worksheet">
    <div class="docTitle">Blackjack 1</div>
    <div class="version" hidden="">1</div>

    <div class="transient">
      <p>First, set the browser to <b>Full Screen</b> view, to give this worksheet and your code as much space as possible.</p>


      <p class="transient">Then choose <i>either one</i> of the two options below:</p>

      <p><b>Option 1: Start this worksheet from scratch</b></p>

      <ul>
        <li>First <label for="username">Enter your name: </label><input class="question" type="text" id="username" /></li>
        <li>Then <button id="auto-save" disabled="">Create and save a new answers file</button>.
        <li>All answers that you subsequently enter/edit will be auto-saved to this sheet.</li>
      </ul>

      <p><b>Option 2: Continue, or view, previous work</b></p>

      <ul>
        <li><button id="load-answers">Load a previously-saved answers file</button></li>
        <li>All answers that you subsequently enter/edit will be auto-saved to this sheet.</li>
        <li>The first time you re-load an answers sheet - within a single session on Elan -
        you will be asked to confirm that you understand this.</li>
      </ul>
    </div>

    <input class="question" type="text" id="postsave-username" disabled=""/>

    <div class="license">
      <img decoding="async" loading="lazy" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-nd.png" width="118" height="41">
      This worksheet is copyright &copy; Richard Pawson 2025, and protected by the Creative Commons license:
          <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"> Attribution-NonCommercial-NoDerivatives 4.0 International</a>.
        You may freely make and distribute copies of this worksheet <i>as is</i>, but if you <i>modify</i> this worksheet you may not distribute your modified version (outside your own teaching institution) without the author's permission.
        Please <a href="mailto:rpawson@nakedobjects.org" target="_blank">email the author</a> to report errors or suggest improvements.
    </div> 
      

<div class="step" id="step1"><h1>Step 1: Exploring the starting code </h1>
  This brief video explains what we are going to develop in this worksheet:
  <div style="position: relative; padding-bottom: 74.64454976303318%; height: 0;"><iframe src="https://www.loom.com/embed/54aa386c6acb44bb83a5a3bb4066a52f" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>

<br>
Then <button class="load" id="load1-0" data-file="whac-a-mole_begin.elan">load the starting code</button><div id="code-load1-0" hidden=""># 60b25b7ed9e70a6dea604bfd2a02063f278d0305f0160215b4ee11cc256d6f05 Elan 1.9.0 guest default_profile valid

main
  variable score set to 0
  while true
    variable hole set to Hole.vacant
    if random() &gt; 0.5 then
      set hole to Hole.mole
    end if
    let html be htmlForSimpleGame(hole, score)
    call displayHtml(html)
    let stop be clock() + 1000
    while clock() &lt; stop
      call processKey(hole, score)
    end while
  end while
end main

procedure processKey(out hole as Hole, out score as Int)
  let n be getNumericKey()
  if n isnt -1 then
    if hole is Hole.mole then
      set hole to Hole.hit
      set score to score + 1
    else if hole is Hole.vacant then
      set hole to Hole.miss
      set score to score - 1
    end if
    let html be htmlForSimpleGame(hole, score)
    call displayHtml(html)
  end if
end procedure

[imported] enum Hole vacant, mole, hit, miss

[imported] function htmlForSimpleGame(hole as Hole, score as Int) returns String
  let core be htmlForHole(hole, "hole")
  return "&lt;style&gt;{styleSheet}&lt;/style&gt;&lt;div class='game'&gt;{core}&lt;/div&gt;&lt;div class='score'&gt;Score: {score}&lt;/score&gt;"
end function

[imported] function htmlForFullGame(holes as Array&lt;of Hole&gt;, score as Int) returns String
  variable core set to ""
  for i from 0 to holes.length() - 1 step 1
    set core to core + htmlForHole(holes[i], i.asString())
  end for
  return "&lt;style&gt;{styleSheet}&lt;/style&gt;&lt;div class='game'&gt;{core}&lt;/div&gt;&lt;div class='score'&gt;Score: {score}&lt;/score&gt;"
end function

[imported] function htmlForHole(hole as Hole, label as String) returns String
  let img be imageForStatus[hole]
  return "&lt;div class='hole'&gt;&lt;img src='{img}'&gt;&lt;div class='label'&gt;{label}&lt;/div&gt;&lt;/div&gt;"
end function

# Acknowledgement:  mole icon source https://www.flaticon.com/
[imported] constant vacantImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/vacant.png"

[imported] constant moleImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/mole.png"

[imported] constant hitImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/hit.png"

[imported] constant missImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/miss.png"

[imported] constant imageForStatus set to {Hole.vacant:vacantImg, Hole.mole:moleImg, Hole.hit:hitImg, Hole.miss:missImg}

[imported] constant styleSheet set to '\n.game { display: flex; flex-direction: row; }\n.hole { display: flex; flex-direction: column; width: 50px; height: 50px; border: 10px solid white;}\n.label {width: 40px; text-align: center;}\n.hole img {height: 40px; width: 40px}\n.score{ margin-top: 20px;}'
</div>, 
watch the following video, exploring the code alongside the video:
<div style="position: relative; padding-bottom: 79.2156862745098%; height: 0;"><iframe src="https://www.loom.com/embed/1cc0c1b2fac74ee19468d5e476105efc" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
<p>What is an 'enum' ?</p>
<textarea class="question" id="question1-0" placeholder="input is required"></textarea>
<p>What is the largest and smallest result returned by the random() method?</p>
<textarea class="question" id="question1-1" placeholder="input is required"></textarea>
<h4>Notes</h4><textarea class="notes" id="notes1" placeholder="Student or teacher may optionally add notes here"></textarea><label class="done" for="done1">Step Completed</label><input class="step-complete" type="checkbox" id="done1"><span> Total hints used: <span class="hints-taken"></span>/<span class="hints-total"></span></span></div>

<div class="step" id="step2"><h1>Step 2: creating an Array</h1>
  <div style="position: relative; padding-bottom: 52.156862745098046%; height: 0;"><iframe src="https://www.loom.com/embed/6cf124d7d838492b9e3de43a0150c7cf" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
  <p>Having made the changes shown in the video and run the program, describe what the display shows?</p>
<textarea class="question" id="question2-0" placeholder="input is required"></textarea>
  <p>Do any moles appear?</p>
<textarea class="question" id="question2-1" placeholder="input is required"></textarea>
  <p>What does 'DRY' stand for in 'the DRY principle'?</p>
<textarea class="question" id="question2-2" placeholder="input is required"></textarea>
<h4>Notes</h4><textarea class="notes" id="notes2" placeholder="Student or teacher may optionally add notes here"></textarea><label class="done" for="done2">Step Completed</label><input class="step-complete" type="checkbox" id="done2"><span> Total hints used: <span class="hints-taken"></span>/<span class="hints-total"></span></span></div>

<div class="step" id="step3"><h1>Step 3: making moles appear again</h1>
  <div style="position: relative; padding-bottom: 45.75936883629191%; height: 0;"><iframe src="https://www.loom.com/embed/c2c6219d1a444849886bbe161b4db3f5" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
  <p>Does the game respond to keyboard input?</p>
<textarea class="question" id="question3-0" placeholder="input is required"></textarea>
  <h4>Notes</h4><textarea class="notes" id="notes3" placeholder="Student or teacher may optionally add notes here"></textarea><label class="done" for="done3">Step Completed</label><input class="step-complete" type="checkbox" id="done3"><span> Total hints used: <span class="hints-taken"></span>/<span class="hints-total"></span></span></div>

<div class="step" id="step4"><h1>Step 4: responding to the keyboard input</h1>
  <div style="position: relative; padding-bottom: 75.83497053045186%; height: 0;"><iframe src="https://www.loom.com/embed/87535d5e3a5b42b597e1f96977a09181" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
  Make the changes shown in the video and then run the program - to show that you can now hit (and also miss!) the moles.
  If you find that the moles change too quickly to hit, change the speed by editing this line:

  <el-code-block><el-statement class="none" id="let4" tabindex="-1"><el-kw>let </el-kw><el-field id="var5" class="ok" tabindex="-1"><el-txt><el-id>stop</el-id></el-txt><el-place><i>name</i></el-place><el-compl></el-compl><el-msg></el-msg><el-help title="Click to open Help for this field"><a href="documentation/LangRef.html#ValueDefField" target="help-iframe" tabindex="-1">?</a></el-help></el-field><el-kw> be </el-kw><el-field id="expr6" class="ok" tabindex="-1"><el-txt><el-method>clock</el-method>() + <el-lit>1000</el-lit></el-txt><el-place><i>value or expression</i></el-place><el-compl></el-compl><el-msg></el-msg><el-help title="Click to open Help for this field"><a href="documentation/LangRef.html#ExpressionField" target="help-iframe" tabindex="-1">?</a></el-help></el-field><el-msg></el-msg><el-fr>0</el-fr></el-statement></el-code-block>

  changing the value to 2000 (milliseconds), for example.
  <p>What is the main difference between how this game works and the one shown in the introductory video at the start of this worksheet?</p>
<textarea class="question" id="question4-0" placeholder="input is required"></textarea>
<h4>Notes</h4><textarea class="notes" id="notes4" placeholder="Student or teacher may optionally add notes here"></textarea><label class="done" for="done4">Step Completed</label><input class="step-complete" type="checkbox" id="done4"><span> Total hints used: <span class="hints-taken"></span>/<span class="hints-total"></span></span></div>

<div class="step" id="step5"><h1>Step 5: making multiple moles appear</h1>

  <p>When should you use a 'for' loop?</p>
<textarea class="question" id="question5-0" placeholder="input is required"></textarea>
  <p>How can you select multiple instructions in the Elan editor?</p>
<textarea class="question" id="question5-1" placeholder="input is required"></textarea>
  <p>What is 'dead code' within a program?</p>
<textarea class="question" id="question5-2" placeholder="input is required"></textarea>
<h4>Notes</h4><textarea class="notes" id="notes5" placeholder="Student or teacher may optionally add notes here"></textarea><label class="done" for="done5">Step Completed</label><input class="step-complete" type="checkbox" id="done5"><span> Total hints used: <span class="hints-taken"></span>/<span class="hints-total"></span></span></div>

<div class="step" id="step6"><h1>Step 6: review what we have learned</h1>
  <div style="position: relative; padding-bottom: 64.90196078431373%; height: 0;"><iframe src="https://www.loom.com/embed/31735b55a5c0494db786a6a2ee57976f" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
  <p>What, in general terms, does an Array allow you to do?</p>
<textarea class="question" id="question6-0" placeholder="input is required"></textarea>
  <p>An Array is a simple example of a more general concept, called what?</p>
<textarea class="question" id="question6-1" placeholder="input is required"></textarea>
  <p>What pieces of information must you specify when defining an Array?</p>
<textarea class="question" id="question6-2" placeholder="input is required"></textarea>
  <p>If you created an array of just five elements, what would be the element numbers of the first, and last, elements?</p>
<textarea class="question" id="question6-3" placeholder="input is required"></textarea>
  <p>What would be the syntax for reading the first element of an array named 'players'?</p>
<textarea class="question" id="question6-4" placeholder="input is required"></textarea>
  <p>What instruction is used to change a specific element within an existing array?</p>
<textarea class="question" id="question6-5" placeholder="input is required"></textarea>
<h4>Notes</h4><textarea class="notes" id="notes6" placeholder="Student or teacher may optionally add notes here"></textarea><label class="done" for="done6">Step Completed</label><input class="step-complete" type="checkbox" id="done6"><span> Total hints used: <span class="hints-taken"></span>/<span class="hints-total"></span></span></div>

<div class="final" id="final7"><h1>Congratulations! You have completed this worksheet</h1>
  If you have time available, there are two optional activities:

  <b>Continue to refine the game</b>
  <p>Here are some ways that you might like to refine the game</p>

  <ul>
    <li>At the start of the program allow the user to select a level of play - say as a number in the range 1-5. 
      (Look up the library method <el-method>inputIntBetween</el-method> in the <b>Help</b> tab <a class="help" href="LibRef.html#inputIntBetween" id="help7-0">show in Help</a>.)
      Use this number in a formula to alter the time specified in this instruction: <el-code><el-statement class="none" id="let4" tabindex="-1"><el-kw>let </el-kw><el-field id="var5" class="ok" tabindex="-1"><el-txt><el-id>stop</el-id></el-txt><el-place><i>name</i></el-place><el-compl></el-compl><el-msg></el-msg><el-help title="Click to open Help for this field"><a href="documentation/LangRef.html#ValueDefField" target="help-iframe" tabindex="-1">?</a></el-help></el-field><el-kw> be </el-kw><el-field id="expr6" class="ok" tabindex="-1"><el-txt><el-method>clock</el-method>() + <el-lit>1000</el-lit></el-txt><el-place><i>value or expression</i></el-place><el-compl></el-compl><el-msg></el-msg><el-help title="Click to open Help for this field"><a href="documentation/LangRef.html#ExpressionField" target="help-iframe" tabindex="-1">?</a></el-help></el-field><el-msg></el-msg><el-fr>0</el-fr></el-statement></el-code>
    </li>
    <li>Keep track of how many moles have actually appeared, and display this as well as the score.</li>
    <li>Award a bonus point if, whenever three moles are shown at once, you hit all three before they disappear.</li>
  </ul>

  <b>Explore the source code in more depth</b>
  <p><button class="load" id="load7-0" data-file="whac-a-mole_begin.elan">load the source code</button></p><div id="code-load7-0" hidden=""># 60b25b7ed9e70a6dea604bfd2a02063f278d0305f0160215b4ee11cc256d6f05 Elan 1.9.0 guest default_profile valid

main
  variable score set to 0
  while true
    variable hole set to Hole.vacant
    if random() &gt; 0.5 then
      set hole to Hole.mole
    end if
    let html be htmlForSimpleGame(hole, score)
    call displayHtml(html)
    let stop be clock() + 1000
    while clock() &lt; stop
      call processKey(hole, score)
    end while
  end while
end main

procedure processKey(out hole as Hole, out score as Int)
  let n be getNumericKey()
  if n isnt -1 then
    if hole is Hole.mole then
      set hole to Hole.hit
      set score to score + 1
    else if hole is Hole.vacant then
      set hole to Hole.miss
      set score to score - 1
    end if
    let html be htmlForSimpleGame(hole, score)
    call displayHtml(html)
  end if
end procedure

[imported] enum Hole vacant, mole, hit, miss

[imported] function htmlForSimpleGame(hole as Hole, score as Int) returns String
  let core be htmlForHole(hole, "hole")
  return "&lt;style&gt;{styleSheet}&lt;/style&gt;&lt;div class='game'&gt;{core}&lt;/div&gt;&lt;div class='score'&gt;Score: {score}&lt;/score&gt;"
end function

[imported] function htmlForFullGame(holes as Array&lt;of Hole&gt;, score as Int) returns String
  variable core set to ""
  for i from 0 to holes.length() - 1 step 1
    set core to core + htmlForHole(holes[i], i.asString())
  end for
  return "&lt;style&gt;{styleSheet}&lt;/style&gt;&lt;div class='game'&gt;{core}&lt;/div&gt;&lt;div class='score'&gt;Score: {score}&lt;/score&gt;"
end function

[imported] function htmlForHole(hole as Hole, label as String) returns String
  let img be imageForStatus[hole]
  return "&lt;div class='hole'&gt;&lt;img src='{img}'&gt;&lt;div class='label'&gt;{label}&lt;/div&gt;&lt;/div&gt;"
end function

# Acknowledgement:  mole icon source https://www.flaticon.com/
[imported] constant vacantImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/vacant.png"

[imported] constant moleImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/mole.png"

[imported] constant hitImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/hit.png"

[imported] constant missImg set to "https://elan-lang.org/documentation/worksheets/whack-a-mole/miss.png"

[imported] constant imageForStatus set to {Hole.vacant:vacantImg, Hole.mole:moleImg, Hole.hit:hitImg, Hole.miss:missImg}

[imported] constant styleSheet set to '\n.game { display: flex; flex-direction: row; }\n.hole { display: flex; flex-direction: column; width: 50px; height: 50px; border: 10px solid white;}\n.label {width: 40px; text-align: center;}\n.hole img {height: 40px; width: 40px}\n.score{ margin-top: 20px;}'
</div> and then watch the following video.
    <i></i>Warning: this does mention a couple of fairly advanced technical concepts that you certainly don't <i>need</i>
   to understand at this stage, but are included for those who might <i>want</i> to go deeper.<p></p>
   <div style="position: relative; padding-bottom: 83.33333333333334%; height: 0;"><iframe src="https://www.loom.com/embed/a25fe4443e8f48d2a126407aaeaf3c49" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
</div>

  <div hidden="" id="hash"></div>
  <div hidden="" id="changes"></div>

    <script src="https://elan-language.github.io/LanguageAndIDE/diff.js"></script>
    <script src="https://elan-language.github.io/LanguageAndIDE/worksheet-model-scripts.js"></script>
  </body>
</html>